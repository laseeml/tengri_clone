<template>
    <div class="d-flex justify-content-center min-height-100 flex-column">
        <div class="w-100 d-flex bg-lg-dark mb-5 p-4 js-center">
            <router-link :to="{name: 'home'}" class="logo">
                <div class="logo-image">
                    <svg width="232" height="47" viewBox="0 0 232 47" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M12.8259 40.9831H25.2362L12.8259 31.0054V40.9831ZM2.48389 16.894H12.8259L25.2362 26.8716V16.894H35.5782V5.94434H2.48389V16.894Z" fill="#03AB02"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M43.1997 13.0185H59.8863V16.8939H53.7276V34.0565H49.3584V16.8939H43.1997V13.0185ZM140.066 13.0308H144.435V34.0688H140.066V13.0308ZM129.817 13.0308C131.42 13.0308 132.768 13.3384 133.837 13.9412C134.906 14.5563 135.708 15.3683 136.231 16.3772C136.765 17.386 137.021 18.4933 137.021 19.699C137.021 20.5233 136.882 21.3229 136.614 22.1226C136.335 22.91 135.917 23.6359 135.336 24.2879C134.767 24.9277 134.035 25.4444 133.128 25.8258L137.428 34.0688H132.571L128.794 26.404H125.529V34.0688H121.16V13.0308H129.817ZM132.571 19.699C132.571 18.8378 132.327 18.1611 131.85 17.6567C131.362 17.1523 130.618 16.9062 129.596 16.9062H125.54V22.5286H129.596C130.281 22.5286 130.839 22.4179 131.269 22.1965C131.699 21.975 132.036 21.6551 132.245 21.2245C132.466 20.7939 132.571 20.2895 132.571 19.7113V19.699ZM114.211 19.822C113.665 18.7639 112.967 17.9889 112.119 17.4967C111.282 17.0046 110.341 16.7586 109.295 16.7586C108.203 16.7586 107.204 17.0538 106.332 17.6444C105.449 18.2349 104.764 19.0469 104.264 20.068C103.764 21.0892 103.509 22.258 103.509 23.5498C103.509 24.8416 103.753 26.0965 104.252 27.1053C104.74 28.1142 105.437 28.9138 106.321 29.4798C107.215 30.0457 108.25 30.341 109.446 30.341C110.19 30.341 110.864 30.2057 111.492 29.935C112.119 29.6643 112.677 29.2829 113.165 28.8031C113.653 28.3233 114.071 27.7697 114.408 27.1545V26.1949H109.295V22.5286H118.522V28.0034C118.069 29.1107 117.406 30.1318 116.535 31.0792C115.663 32.0265 114.617 32.8016 113.386 33.3921C112.154 33.9826 110.76 34.2779 109.191 34.2779C107.715 34.2779 106.367 34.0196 105.135 33.4905C103.904 32.9615 102.835 32.2233 101.928 31.2637C101.022 30.3041 100.313 29.1599 99.8133 27.8558C99.3136 26.5394 99.058 25.0999 99.058 23.5375C99.058 21.975 99.3136 20.5356 99.8133 19.2314C100.313 17.915 101.01 16.7832 101.917 15.8235C102.811 14.8639 103.88 14.1257 105.112 13.5967C106.344 13.08 107.692 12.8093 109.168 12.8093C110.55 12.8093 111.852 13.0431 113.072 13.4983C114.292 13.9535 115.361 14.6302 116.268 15.4914C117.174 16.3649 117.848 17.4229 118.278 18.6655L114.222 19.8097L114.211 19.822ZM96.4435 13.0308V34.0688H92.0162L83.9517 20.6586V34.0688H79.5825V13.0308H84.0098L92.0394 26.5025V13.0308H96.4435ZM76.9448 16.9062H66.8933V21.7166H74.4116V25.3829H66.8933V30.1933H76.9448V34.0688H62.5241V13.0308H76.9448V16.9062Z" fill="white"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M168.848 13.0306V34.0685H166.547L155.926 16.8814V34.0685H153.66V13.0306H155.961L166.582 30.1931V13.0306H168.848ZM186.15 15.1344H175.39V22.3193H183.478V24.4231H175.39V31.9647H186.15V34.0685H173.124V13.0306H186.15V15.1344ZM196.33 34.0685H193.831L188.242 13.0306H190.659L195.086 31.1528L199.967 13.0306H202.488L207.345 31.1282L211.808 13.0306H214.19L208.6 34.0685H206.102L201.222 16.6353L196.341 34.0685H196.33ZM217.978 28.7168C218.094 29.2581 218.338 29.7994 218.698 30.3285C219.07 30.8575 219.582 31.3004 220.232 31.6449C220.883 32.0017 221.72 32.1739 222.742 32.1739C224.195 32.1739 225.275 31.8171 225.984 31.0912C226.681 30.3654 227.03 29.5165 227.03 28.5322C227.03 27.7448 226.833 27.1051 226.437 26.613C226.042 26.1086 225.496 25.6903 224.822 25.3704C224.137 25.0382 223.37 24.7429 222.521 24.4846C221.766 24.2631 221.011 24.0171 220.267 23.7464C219.523 23.4757 218.838 23.1313 218.234 22.7253C217.629 22.3193 217.141 21.7779 216.781 21.1136C216.421 20.4492 216.247 19.6249 216.247 18.653C216.247 17.4719 216.514 16.4385 217.037 15.5773C217.571 14.7038 218.315 14.0271 219.279 13.5473C220.244 13.0675 221.371 12.8214 222.661 12.8214C223.776 12.8214 224.753 12.9937 225.589 13.3381C226.426 13.6826 227.123 14.1501 227.681 14.7653C228.239 15.3804 228.645 16.0817 228.913 16.8814L226.902 17.6934C226.774 17.2382 226.519 16.7829 226.135 16.3523C225.752 15.9217 225.264 15.565 224.66 15.282C224.055 14.999 223.358 14.8637 222.591 14.8637C221.824 14.8637 221.15 14.999 220.534 15.282C219.919 15.565 219.43 15.9587 219.07 16.4877C218.71 17.0044 218.536 17.6442 218.536 18.3823C218.536 19.182 218.745 19.8218 219.175 20.2893C219.605 20.7568 220.163 21.1382 220.883 21.4335C221.592 21.7287 222.37 21.9994 223.23 22.2577C224.009 22.5161 224.764 22.7991 225.485 23.0943C226.217 23.3896 226.867 23.771 227.448 24.2016C228.029 24.6445 228.483 25.1981 228.82 25.8502C229.157 26.5146 229.331 27.3265 229.331 28.2862C229.331 29.3442 229.098 30.3408 228.622 31.2512C228.146 32.1616 227.437 32.8998 226.484 33.4411C225.531 33.9947 224.299 34.2654 222.812 34.2654C221.569 34.2654 220.465 34.0562 219.523 33.6502C218.582 33.2443 217.804 32.6783 217.199 31.9771C216.595 31.2758 216.177 30.4761 215.944 29.578L218.013 28.7045L217.978 28.7168Z" fill="white"/>
                    </svg>
                </div>
            </router-link>
        </div>
        <form @submit.prevent="create" class="center-form">
            <div class="form-outline mb-4 d-flex justify-content-center">
                <h1>Admin Form</h1>
            </div>
            <div class="form-outline mb-4">
                <input type="text" class="form-control" placeholder="News Title" v-model="title"/>
            </div>
            <div class="form-outline mb-4">
                <textarea class="form-control" placeholder="News Description Title" v-model="description_title"></textarea>
            </div>
            <div class="form-outline mb-4">
                <textarea class="form-control" placeholder="News Description" v-model="description"></textarea>
            </div>
            <div class="form-outline mb-4">
                <input type="file" class="form-control" placeholder="News Image" @change="onFileChange"/>
            </div>
            <div class="form-outline mb-4">
                <span class="me-3">Category:</span>
                <select name="" id="" v-model="category_id">
                    <option value="1">News</option>
                    <option value="2">Life</option>
                    <option value="3">Edu</option>
                </select>
            </div>
            <button type="submit" data-mdb-button-init data-mdb-ripple-init class="btn btn-primary btn-block mb-4 w-100">Create</button>
        </form>
    </div>
</template>
<script setup>
import useNews from "@/service/News.js";
import {ref} from "vue";

const {errors, createNews} = useNews()

const title = ref('')
const description_title = ref('')
const description = ref('')
const image = ref(File)
const category_id = ref(1)

const create = async () => {
    const formData = new FormData();
    formData.append('image', image.value);
    formData.append('title', title.value);
    formData.append('description_title', description_title.value);
    formData.append('description', description.value);
    formData.append('category_id', category_id.value);
    await createNews(formData)
    location.reload()
}

const onFileChange = (e) => {
    image.value = e.target.files[0]
}
</script>
<style scoped>
.center-form{
    width: 400px;
    margin: 0 auto;
}
.min-height-100{
    min-height: 100vh;
}
.bg-lg-dark{
    background-color: #303032;
}
.js-center{
    justify-content: center;
}
</style>
